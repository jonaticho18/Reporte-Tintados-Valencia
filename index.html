<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tintados Valencia - Informe 13-20 Sep</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{--p:#2c5aa0;--g:#28a745;--o:#fd7e14;--r:#dc3545}
body{background:#f5f7fb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
.card{border:0;box-shadow:0 8px 24px rgba(0,0,0,.08);border-radius:16px}
.kpi .value{font-size:2rem;font-weight:700;color:var(--p)}
.badge-soft{background:#eef3ff;color:#2c5aa0;border-radius:12px;padding:6px 10px}
small.note{opacity:.7}
</style>
</head>
<body>
<div class="container py-4">
  <div class="mb-4 text-center">
    <h2 class="mb-1">Tintados Valencia — Informe de Resultados</h2>
    <div class="badge-soft">13–20 septiembre • Instagram y WhatsApp</div>
  </div>

  <!-- KPIs -->
  <div class="row g-3">
    <div class="col-6 col-lg-3">
      <div class="card kpi p-3">
        <div class="value" id="kpiReach">17,851</div>
        <div>Alcance</div>
        <small class="note">Total campaña</small>
      </div>
    </div>
    <div class="col-6 col-lg-3">
      <div class="card kpi p-3">
        <div class="value" id="kpiImpr">25,012</div>
        <div>Impresiones</div>
        <small class="note">Frecuencia 1.40</small>
      </div>
    </div>
    <div class="col-6 col-lg-3">
      <div class="card kpi p-3">
        <div class="value" id="kpiCtr">3.97%</div>
        <div>CTR (all)</div>
        <small class="note">Hook rate 33.06%</small>
      </div>
    </div>
    <div class="col-6 col-lg-3">
      <div class="card kpi p-3">
        <div class="value" id="kpiClicks">501</div>
        <div>Clics únicos</div>
        <small class="note">Inversión $150,000 ARS • CPC $299.40</small>
      </div>
    </div>
  </div>

  <!-- Charts -->
  <div class="row g-3 mt-1">
    <div class="col-lg-6">
      <div class="card p-3">
        <h6 class="mb-3">Clics únicos por conjunto</h6>
        <canvas id="clicksSet"></canvas>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="card p-3">
        <h6 class="mb-3">CTR vs Hook rate (conjuntos)</h6>
        <canvas id="scatterSet"></canvas>
      </div>
    </div>
  </div>

  <div class="row g-3 mt-1">
    <div class="col-lg-6">
      <div class="card p-3">
        <h6 class="mb-3">Distribución de inversión</h6>
        <canvas id="spendPie"></canvas>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="card p-3">
        <h6 class="mb-3">CPC por conjunto</h6>
        <canvas id="cpcBars"></canvas>
      </div>
    </div>
  </div>

  <!-- Tabla detalle -->
  <div class="card p-3 mt-3">
    <h6 class="mb-3">Detalle por conjunto</h6>
    <div class="table-responsive">
      <table class="table table-sm align-middle">
        <thead>
          <tr>
            <th>Conjunto</th>
            <th>Alcance</th>
            <th>Impresiones</th>
            <th>CTR</th>
            <th>Hook rate</th>
            <th>Clics únicos</th>
            <th>Inversión</th>
            <th>CPC</th>
          </tr>
        </thead>
        <tbody id="tblBody"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
// Datos desde reportes (redondeados para UI)
const dataCampaign = {
  reach: 17851, impressions: 25012, frequency: 1.401154,
  ctr: 3.974092, hook: 0.33056133, uniqClicks: 501, spend: 150000
};

const sets = [
  {
    name: "Broad Audience Valencia - IG",
    reach: 9479, impressions: 14759, ctr: 3.618131, hook: 0.3235314,
    uniqClicks: 82, spend: 75489.01
  },
  {
    name: "Broad Audience Valencia WhatsApp",
    reach: 8432, impressions: 10253, ctr: 4.486492, hook: 0.34068078,
    uniqClicks: 419, spend: 74510.99
  }
];

// KPIs
document.getElementById('kpiReach').textContent = dataCampaign.reach.toLocaleString('es-AR');
document.getElementById('kpiImpr').textContent = dataCampaign.impressions.toLocaleString('es-AR');
document.getElementById('kpiCtr').textContent = dataCampaign.ctr.toFixed(2) + '%';
document.getElementById('kpiClicks').textContent = dataCampaign.uniqClicks.toLocaleString('es-AR');

// Gráfico: clics por conjunto
new Chart(document.getElementById('clicksSet'), {
  type: 'bar',
  data: {
    labels: sets.map(s=>s.name),
    datasets: [{label:'Clics únicos', data: sets.map(s=>s.uniqClicks),
      backgroundColor: ['#2c5aa0','#28a745']}]
  },
  options: {plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
});

// Scatter CTR vs Hook
new Chart(document.getElementById('scatterSet'), {
  type: 'scatter',
  data: {
    datasets: sets.map((s,i)=>({
      label: s.name, data: [{x:s.ctr, y:(s.hook*100)}],
      backgroundColor: i? '#28a745':'#2c5aa0', pointRadius: 8
    }))
  },
  options: {
    scales: {
      x: {title:{display:true,text:'CTR (%)'}, min:0, max:6},
      y: {title:{display:true,text:'Hook rate (%)'}, min:20, max:50}
    }
  }
});

// Pie spend
new Chart(document.getElementById('spendPie'), {
  type: 'doughnut',
  data: {
    labels: sets.map(s=>s.name),
    datasets: [{data: sets.map(s=>s.spend), backgroundColor:['#2c5aa0','#fd7e14']}]
  },
  options: {plugins:{legend:{position:'bottom'}}}
});

// CPC bars
new Chart(document.getElementById('cpcBars'), {
  type: 'bar',
  data: {
    labels: sets.map(s=>s.name),
    datasets: [{label:'CPC (ARS por clic único)', data: sets.map(s=>(s.spend/s.uniqClicks).toFixed(2)),
      backgroundColor: ['#2c5aa0','#dc3545']}]
  },
  options: {plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
});

// Tabla
const tbody = document.getElementById('tblBody');
sets.forEach(s=>{
  const row = document.createElement('tr');
  const cpc = (s.spend / s.uniqClicks);
  row.innerHTML = `
    <td>${s.name}</td>
    <td>${s.reach.toLocaleString('es-AR')}</td>
    <td>${s.impressions.toLocaleString('es-AR')}</td>
    <td>${s.ctr.toFixed(2)}%</td>
    <td>${(s.hook*100).toFixed(2)}%</td>
    <td>${s.uniqClicks.toLocaleString('es-AR')}</td>
    <td>$${s.spend.toLocaleString('es-AR',{maximumFractionDigits:0})}</td>
    <td>$${cpc.toFixed(2)}</td>
  `;
  tbody.appendChild(row);
});
</script>
</body>
</html>
